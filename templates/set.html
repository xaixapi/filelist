{% extends base.html %}{% block content %}
<div class="layui-content">
  <div class="layui-tab layui-tab-brief" lay-filter="admin">
    <ul class="layui-tab-title">
      <li lay-id="1">ğ‘²ğ’Šğ’ğ’…ğ’ğ’† æ¨é€é‚®ç®±</li>
      <li lay-id="2">å¯†ç æ›´æ”¹</li>
      {% if handler.app.options.auth and current_user and current_user.admin %}
      <li lay-id="3">æ³¨å†Œè®¾ç½®</li>
      <li lay-id="4">ç³»ç»Ÿä¿¡æ¯</li>
      {% end %}
    </ul>
    <div class="layui-tab-content">
      {% if current_user.admin %}
      <div class="layui-tab-item">
      {% else %}
      <div class="layui-tab-item layui-show">
      {% end %}
        <blockquote class="layui-elem-quote">
          <p>è®¾ç½® ğ‘²ğ’Šğ’ğ’…ğ’ğ’† æ¨é€é‚®ç®±,è¯·å…ˆå°† <b>{{ handler.app.email.user }}</b> æ·»åŠ åˆ°å·²è®¤å¯çš„å‘ä»¶äººç”µå­é‚®ç®±åˆ—è¡¨,å½“å‰æ¨é€é‚®ç®± [ {{ current_user.kindle }} ]</p>
        </blockquote>
        <form class="layui-form" action="/set" method="POST">
          <div class="layui-form-item">
            <label class="layui-form-label">Kindle é‚®ç®±</label>
            <div class="layui-input-inline">
              <input name="kindle" autocomplete="off" class="layui-input" value="{{ current_user.kindle or '' }}">
            </div>
            <div class="layui-form-mid">
              <button type="button" class="layui-btn layui-btn-primary layui-btn-xs layui-btn-radius btn-email">å‘é€éªŒè¯ç </button>
            </div>
          </div>
          <div class="layui-form-item">
            <label class="layui-form-label">éªŒè¯ç </label>
            <div class="layui-input-inline">
              <input name="code" autocomplete="off" class="layui-input">
            </div>
          </div>
          <div class="layui-form-item">
            <label class="layui-form-label">å…¬å¼€è®¿é—®</label>
            <div class="layui-input-inline">
              <input type="checkbox" name="public" lay-skin="switch" lay-text="å¼€å¯|å…³é—­" {% if current_user.public %}checked{% end %}>
            </div>
            <div class="layui-form-mid layui-word-aux">å…¬å¼€[æˆ‘çš„æ–‡ä»¶],åˆ™å…¶ä»–äººä¸éœ€è¦éªŒè¯å³å¯ç›´æ¥è®¿é—®</div>
          </div>
          <div class="layui-form-item">
            <div class="layui-input-block">
              {% if handler.mobile %}
              <button class="layui-btn layui-btn-primary layui-btn-fluid" lay-submit lay-filter="default">ä¿å­˜</button>
              {% else %}
              <button style="width:190px" class="layui-btn layui-btn-primary layui-btn-fluid" lay-submit lay-filter="default">ä¿å­˜</button>
              {% end %}
            </div>
          </div>
        </form>
      </div>

      <div class="layui-tab-item">
        <blockquote class="layui-elem-quote">
          <p>åœ¨æ­¤å¤„æ›´æ”¹æ‚¨çš„å¯†ç </p>
        </blockquote>
        <form class="layui-form" action="/user" method="POST">
          <div class="layui-form-item">
            <label class="layui-form-label">åŸå¯†ç </label>
            <div class="layui-input-inline">
              <input type="password" name="old_password" placeholder="åŸå¯†ç " autocomplete="off" class="layui-input" required lay-verify="required" readonly onfocus="this.removeAttribute('readonly');">
            </div>
          </div>
          <div class="layui-form-item">
            <label class="layui-form-label">æ–°å¯†ç </label>
            <div class="layui-input-inline">
              <input type="password" name="password" placeholder="æ–°å¯†ç " autocomplete="off" class="layui-input" required lay-verify="required" readonly onfocus="this.removeAttribute('readonly');">
            </div>
          </div>
          <div class="layui-form-item">
            <label class="layui-form-label">å†ç¡®è®¤</label>
            <div class="layui-input-inline">
              <input type="password" name="password" placeholder="å†è¾“å…¥ä¸€æ¬¡" autocomplete="off" class="layui-input" required lay-verify="required" readonly onfocus="this.removeAttribute('readonly');">
            </div>
          </div>
          <div class="layui-form-item">
            <div class="layui-input-block">
              {% if handler.mobile %}
              <button class="layui-btn layui-btn-primary layui-btn-fluid" lay-submit lay-filter="default">ä¿å­˜</button>
              {% else %}
              <button style="width:190px" class="layui-btn layui-btn-primary layui-btn-fluid" lay-submit lay-filter="default">ä¿å­˜</button>
              {% end %}
            </div>
          </div>
        </form>
      </div>

      {% if current_user.admin %}
      <div class="layui-tab-item">
        <blockquote class="layui-elem-quote">
          <p>å¯ä»¥è®¾ç½®ä¸€ä¸ªé‚®ç®±ç™½åå•æˆ–é»‘åå•ï¼Œå½“è®¾ç½®äº†ç™½åå•æ—¶ï¼Œåªå…è®¸ä½¿ç”¨åœ¨ç™½åå•ä¸­çš„é‚®ç®±åç¼€è¿›è¡Œæ³¨å†Œã€‚å¦‚æœè¦è®¾ç½®é»‘åå•ï¼Œåˆ™éœ€è¦æ¸…ç©ºç™½åå•ã€‚</p>
          <p>ä¾‹å¦‚: qq.com,163.com,gmail.com (é€—å·åˆ†éš”å³å¯)</p>
          {% if handler.app.email_whitelist %}
          <p>å½“å‰æ³¨å†Œé‚®ç®±ç™½åå•: <b>{{ handler.app.email_whitelist }}</b> </p>
          {% end %}
          {% if handler.app.email_blacklist %}
          <p>å½“å‰æ³¨å†Œé‚®ç®±é»‘åå•: <b>{{ handler.app.email_blacklist }}</b> </p>
          {% end %}
        </blockquote>
        <form class="layui-form" action="/set" method="POST">

          <h4>è®¾ç½®æ³¨å†Œé‚®ç®±ç™½åå•</h4>
            <div class="layui-input-inline" style="display: block;">
              <input name="whitelist" autocomplete="off" class="layui-input"  value="{{ handler.app.email_whitelist or '' }}">
            </div>

          <h4>è®¾ç½®æ³¨å†Œé‚®ç®±é»‘åå•</h4>
            <div class="layui-input-inline" style="display: block;">
              <input name="blacklist" autocomplete="off" class="layui-input" value="{{ handler.app.email_blacklist or '' }}">
            </div>

          <button style="display: block;" class="layui-btn layui-btn-primary layui-btn-fluid" lay-submit lay-filter="default">ä¿å­˜</button>
        </form>
      </div>

      <div class="layui-tab-item layui-show">
        <blockquote class="layui-elem-quote">
          <p>{{ handler.app.boot_time }}</p>
          <p>{{ handler.app.load_info_str }}</p>
          <p>{{ handler.app.mem_info_str }}</p>
          {% for i in handler.app.disk_info_set %}
          <p>{{ i }}</p>
          {% end %}
          <p>Redis used memory: {{ handler.app.redis_mem }}</p>
          <p>Mongo used memory: {{ handler.app.mongo_mem }} KB</p>
          <p>Files: {{ handler.app.file_count }} <b>[ {{ handler.app.count_update }} ]</b></p>
          <p>Send files: {{ handler.app.send_total }}</p>
          <p>Share documents: {{ handler.app.share_documents }}</p>
          {% for i in handler.app.signup_list %}
          <p>{{ i }}</p>
          {% end %}
          {% for i in handler.app.upload_list %}
          <p>{{ i[:20] }} <a href="/disk/{{ i[20:] }}">{{ i[20:] }}</a></p>
          {% end %}
        </blockquote>
      </div>
      {% end %}

    </div>
  </div>
</div>
{% end %}
